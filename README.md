# si_test

В данном проекте реализован сервер, который по IP подключившегося клиента возвращает название страны клиента.
Сервер получает данные с помощью одного из сервисов, таких как http://geoip.nekudo.com
Полный список серверов указывается в файле конфигурации.

Данные по IP адресам кэшируются в памяти.
Также установлен порог «валидности» IP адреса в кэше.

Поскольку провайдеры имеют ограничение на количество запросов реализована проверка на количество запросов в единицу времени.
Если количество исчерпывается, переключаемся на следующий сервер.

Кофигурация хранится в файле config.json
В корневой папке имеется пример такого файла.
1. Поле TimeUnit - это количество минут в единице времени, используемой для выборки провайдера.
2. Для кэша указываются размер кэша и порог валидности.
3. По каждому серверу указывается строка подключения, в которой есть элемент форматирования %s, вместо которого будет подставляться конкретный ip-адрес,
количество запросов в единицу времени и два поля в ответе для названия страны на английском языке и кода страны по ISO.
Код страны используется для того, чтобы не хранить в кэше для каждого IP строку с названием, а лишь два байта кода ISO. 

Первоначально предполагалось сделать более продвинутую версию реализации кэша, но пока не получилось и кэш был реализован просто с использованием map.
